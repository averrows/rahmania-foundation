---
// File: src/pages/blog/[...slug].astro
import { getCollection } from 'astro:content';
import Layout from '../../layouts/Layout.astro';

export async function getStaticPaths() {
  const blogEntries = await getCollection('blog');
  return blogEntries.map(entry => ({
    params: { post: entry.slug }, props: { entry },
  }));
}

const { entry } = Astro.props;
const { Content } = await entry.render();
---

<Layout title={entry.data.title}>
  <main class="container min-h-[80vh] mx-auto mt-20 px-4 py-8">
    <h1 class="text-5xl font-bold mb-6 text-gray-800 text-center">
      {entry.data.title}
    </h1>

    <p class="text-center text-gray-500 text-sm mb-8">
      Published on {new Date(entry.data.publishDate).toLocaleDateString()}
    </p>

    {entry.data.image && (
      <div class="w-full max-w-4xl mx-auto mb-8">
        <img
          src={entry.data.image.src}
          alt={entry.data.title}
          class="w-full max-h-[500px] object-cover rounded-lg shadow-md"
        />
      </div>
    )}

    <article class="prose lg:prose-xl mx-auto max-w-4xl text-gray-700">
      <Content />
    </article>

    <div class="absolute bottom-[20%] left-[calc(50%-75px)] mt-12 flex justify-center">
      <a
        href="/blog/1"
        class="px-6 py-3 bg-white text-blue-500 border-2 border-blue-500 text-sm font-medium rounded-lg shadow-md hover:bg-blue-600 hover:text-white transition duration-300"
      >
        Kembali ke Blog
      </a>
    </div>
  </main>
</Layout>